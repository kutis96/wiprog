<html>
<head>
    <title>WiProg</title>
</head>
<body>
    <h3>Hello!</h3>
    
    <a href='/api/v1/flash.bin'>Download current flash image</a>
    
    <div>
        <dl>
            <dt>Flash UID</dt>
            <dd id="fuid">Loading...</dd>
            <dt>Flash JID</dt>
            <dd id="fjid">Loading...</dd>
        </dl>
    </div>
    
    <form action='/api/v1/flash.bin' method='post' enctype='multipart/form-data'>
        <input type='file' name='flash' id='flash' value=''>
        <button type='submit'>Upload new flash image</button>
    </form>
    
    <script>
        let xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            document.getElementById("fuid").innerHTML = this.responseText;
          }
        };
        xhttp.open("GET", "/api/v1/uid", false);
        xhttp.send();
        
        xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            document.getElementById("fjid").innerHTML = this.responseText;
          }
        };
        xhttp.open("GET", "/api/v1/jid", false);
        xhttp.send(); 
    </script>
</body>
</html>